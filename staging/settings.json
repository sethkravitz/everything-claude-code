{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "tool == \"Bash\" && tool_input.command matches \"--no-verify\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\necho '[Hook] BLOCKED: --no-verify is not allowed' >&2\necho '[Hook] Fix the pre-commit issue instead of skipping hooks' >&2\nexit 2"
          }
        ],
        "description": "Block --no-verify flag - enforce pre-commit hooks"
      },
      {
        "matcher": "tool == \"Edit\" || tool == \"Write\"",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/strategic-compact/suggest-compact.sh",
            "timeout": 5000
          }
        ],
        "description": "Suggest manual compaction at logical intervals"
      }
    ],
    "PostToolUse": [
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx|js|jsx)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  npx prettier --write \"$file_path\" 2>/dev/null || true\nfi\necho \"$input\"",
            "timeout": 10000
          }
        ],
        "description": "Auto-format JS/TS files with Prettier after edits"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  dir=$(dirname \"$file_path\")\n  project_root=\"$dir\"\n  while [ \"$project_root\" != \"/\" ] && [ ! -f \"$project_root/package.json\" ]; do\n    project_root=$(dirname \"$project_root\")\n  done\n  if [ -f \"$project_root/tsconfig.json\" ]; then\n    cd \"$project_root\" && npx tsc --noEmit --pretty false 2>&1 | grep \"$file_path\" | head -5 >&2 || true\n  fi\nfi\necho \"$input\"",
            "timeout": 30000
          }
        ],
        "description": "TypeScript check after editing .ts/.tsx files"
      },
      {
        "matcher": "tool == \"Edit\" && tool_input.file_path matches \"\\\\.(ts|tsx|js|jsx)$\"",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\ninput=$(cat)\nfile_path=$(echo \"$input\" | jq -r '.tool_input.file_path // \"\"')\nif [ -n \"$file_path\" ] && [ -f \"$file_path\" ]; then\n  console_logs=$(grep -n \"console\\.log\" \"$file_path\" 2>/dev/null || true)\n  if [ -n \"$console_logs\" ]; then\n    echo \"[Hook] WARNING: console.log found in $file_path\" >&2\n    echo \"$console_logs\" | head -3 >&2\n  fi\nfi\necho \"$input\"",
            "timeout": 5000
          }
        ],
        "description": "Warn about console.log statements after edits"
      }
    ],
    "PreCompact": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/memory-persistence/pre-compact.sh",
            "timeout": 5000
          }
        ],
        "description": "Save state before context compaction"
      }
    ],
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/memory-persistence/session-start.sh",
            "timeout": 5000
          }
        ],
        "description": "Load previous context on new session"
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\nif git rev-parse --git-dir > /dev/null 2>&1; then\n  modified=$(git diff --name-only HEAD 2>/dev/null | grep -E '\\.(ts|tsx|js|jsx)$' || true)\n  if [ -n \"$modified\" ]; then\n    has_console=false\n    while IFS= read -r file; do\n      if [ -f \"$file\" ] && grep -q \"console\\.log\" \"$file\" 2>/dev/null; then\n        echo \"[Hook] WARNING: console.log in $file\" >&2\n        has_console=true\n      fi\n    done <<< \"$modified\"\n    if [ \"$has_console\" = true ]; then\n      echo \"[Hook] Remove console.log before committing\" >&2\n    fi\n  fi\nfi",
            "timeout": 10000
          }
        ],
        "description": "Final audit for console.log before session ends"
      },
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/hooks/memory-persistence/session-end.sh",
            "timeout": 5000
          }
        ],
        "description": "Persist session state on end"
      }
    ]
  },
  "permissions": {
    "allow": [
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(cat:*)",
      "Bash(echo:*)",
      "Bash(printf:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(less:*)",
      "Bash(more:*)",
      "Bash(wc:*)",
      "Bash(file:*)",
      "Bash(which:*)",
      "Bash(whereis:*)",
      "Bash(type:*)",
      "Bash(pwd:*)",
      "Bash(date:*)",
      "Bash(whoami:*)",
      "Bash(hostname:*)",
      "Bash(uname:*)",
      "Bash(env:*)",
      "Bash(printenv:*)",
      "Bash(tree:*)",
      "Bash(du:*)",
      "Bash(df:*)",
      "Bash(stat:*)",
      "Bash(readlink:*)",
      "Bash(realpath:*)",
      "Bash(grep:*)",
      "Bash(rg:*)",
      "Bash(ag:*)",
      "Bash(ack:*)",
      "Bash(fzf:*)",
      "Bash(fd:*)",
      "Bash(ps:*)",
      "Bash(top:*)",
      "Bash(htop:*)",
      "Bash(lsof:*)",
      "Bash(netstat:*)",
      "Bash(ping:*)",
      "Bash(dig:*)",
      "Bash(nslookup:*)",
      "Bash(traceroute:*)",
      "Bash(sort:*)",
      "Bash(uniq:*)",
      "Bash(cut:*)",
      "Bash(tr:*)",
      "Bash(jq:*)",
      "Bash(yq:*)",
      "Bash(mkdir:*)",
      "Bash(touch:*)",
      "Bash(cp:*)",
      "Bash(tar:*)",
      "Bash(zip:*)",
      "Bash(unzip:*)",
      "Bash(gzip:*)",
      "Bash(gunzip:*)",
      "Bash(tsc:*)",
      "Bash(esbuild:*)",
      "Bash(vite:*)",
      "Bash(webpack:*)",
      "Bash(turbo:*)",
      "Bash(rustc:*)",
      "Bash(pytest:*)",
      "Bash(trash:*)",
      "Bash(trash-list:*)",
      "Bash(trash-restore:*)",
      "Bash(git status:*)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(git show:*)",
      "Bash(git branch:*)",
      "Bash(git remote:*)",
      "Bash(git fetch:*)",
      "Bash(git pull:*)",
      "Bash(git push:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git checkout:*)",
      "Bash(git switch:*)",
      "Bash(git stash:*)",
      "Bash(git merge:*)",
      "Bash(git rebase:*)",
      "Bash(git cherry-pick:*)",
      "Bash(git tag:*)",
      "Bash(git ls-files:*)",
      "Bash(git rev-parse:*)",
      "Bash(git config --get:*)",
      "Bash(git config --list:*)",
      "Bash(git clone:*)",
      "Bash(git init:*)",
      "Bash(git worktree:*)",
      "Bash(git blame:*)",
      "Bash(git shortlog:*)",
      "Bash(git describe:*)",
      "Bash(git reflog:*)",
      "Bash(gh pr:*)",
      "Bash(gh issue:*)",
      "Bash(gh repo view:*)",
      "Bash(gh repo clone:*)",
      "Bash(gh api:*)",
      "Bash(gh run:*)",
      "Bash(gh workflow:*)",
      "Bash(gh release:*)",
      "Bash(gh gist:*)",
      "Bash(npm run:*)",
      "Bash(npm test:*)",
      "Bash(npm start:*)",
      "Bash(npm list:*)",
      "Bash(npm info:*)",
      "Bash(npm outdated:*)",
      "Bash(npm audit:*)",
      "Bash(npm init:*)",
      "Bash(npm pkg:*)",
      "Bash(npm ci:*)",
      "Bash(npm cache:*)",
      "Bash(npm view:*)",
      "Bash(npm search:*)",
      "Bash(npm config list:*)",
      "Bash(npm config get:*)",
      "Bash(npm ls:*)",
      "Bash(npm explain:*)",
      "Bash(npm fund:*)",
      "Bash(npm doctor:*)",
      "Bash(npm prefix:*)",
      "Bash(npm root:*)",
      "Bash(npm bin:*)",
      "Bash(npx tsc:*)",
      "Bash(npx eslint:*)",
      "Bash(npx prettier:*)",
      "Bash(npx jest:*)",
      "Bash(npx vitest:*)",
      "Bash(npx playwright:*)",
      "Bash(npx prisma:*)",
      "Bash(npx drizzle-kit:*)",
      "Bash(npx tailwindcss:*)",
      "Bash(npx next:*)",
      "Bash(npx turbo:*)",
      "Bash(npx tsx:*)",
      "Bash(npx ts-node:*)",
      "Bash(npx wrangler:*)",
      "Bash(npx convex:*)",
      "Bash(yarn run:*)",
      "Bash(yarn test:*)",
      "Bash(yarn lint:*)",
      "Bash(yarn build:*)",
      "Bash(yarn dev:*)",
      "Bash(yarn start:*)",
      "Bash(yarn list:*)",
      "Bash(yarn info:*)",
      "Bash(yarn why:*)",
      "Bash(yarn cache:*)",
      "Bash(pnpm run:*)",
      "Bash(pnpm test:*)",
      "Bash(pnpm lint:*)",
      "Bash(pnpm build:*)",
      "Bash(pnpm dev:*)",
      "Bash(pnpm start:*)",
      "Bash(pnpm list:*)",
      "Bash(pnpm why:*)",
      "Bash(bun run:*)",
      "Bash(bun test:*)",
      "Bash(bun build:*)",
      "Bash(bun dev:*)",
      "Bash(bun start:*)",
      "Bash(bun pm:*)",
      "Bash(python -c:*)",
      "Bash(python3 -c:*)",
      "Bash(python -m pytest:*)",
      "Bash(python3 -m pytest:*)",
      "Bash(python -m pip list:*)",
      "Bash(python3 -m pip list:*)",
      "Bash(python -m pip show:*)",
      "Bash(python3 -m pip show:*)",
      "Bash(python --version:*)",
      "Bash(python3 --version:*)",
      "Bash(node -e:*)",
      "Bash(node -p:*)",
      "Bash(node --version:*)",
      "Bash(docker ps:*)",
      "Bash(docker images:*)",
      "Bash(docker logs:*)",
      "Bash(docker inspect:*)",
      "Bash(docker build:*)",
      "Bash(docker start:*)",
      "Bash(docker stop:*)",
      "Bash(docker restart:*)",
      "Bash(docker cp:*)",
      "Bash(docker exec:*)",
      "Bash(docker stats:*)",
      "Bash(docker top:*)",
      "Bash(docker port:*)",
      "Bash(docker network ls:*)",
      "Bash(docker network inspect:*)",
      "Bash(docker volume ls:*)",
      "Bash(docker volume inspect:*)",
      "Bash(docker info:*)",
      "Bash(docker version:*)",
      "Bash(docker-compose ps:*)",
      "Bash(docker-compose logs:*)",
      "Bash(docker-compose build:*)",
      "Bash(docker-compose up:*)",
      "Bash(docker-compose down:*)",
      "Bash(docker-compose start:*)",
      "Bash(docker-compose stop:*)",
      "Bash(docker-compose restart:*)",
      "Bash(docker-compose exec:*)",
      "Bash(docker-compose config:*)",
      "Bash(kubectl get:*)",
      "Bash(kubectl describe:*)",
      "Bash(kubectl logs:*)",
      "Bash(kubectl exec:*)",
      "Bash(kubectl port-forward:*)",
      "Bash(kubectl config:*)",
      "Bash(kubectl cluster-info:*)",
      "Bash(kubectl top:*)",
      "Bash(kubectl api-resources:*)",
      "Bash(kubectl explain:*)",
      "Bash(cargo build:*)",
      "Bash(cargo test:*)",
      "Bash(cargo check:*)",
      "Bash(cargo clippy:*)",
      "Bash(cargo fmt:*)",
      "Bash(cargo run:*)",
      "Bash(cargo doc:*)",
      "Bash(cargo bench:*)",
      "Bash(cargo tree:*)",
      "Bash(cargo metadata:*)",
      "Bash(go build:*)",
      "Bash(go test:*)",
      "Bash(go fmt:*)",
      "Bash(go vet:*)",
      "Bash(go mod tidy:*)",
      "Bash(go mod download:*)",
      "Bash(go run:*)",
      "Bash(go doc:*)",
      "Bash(go list:*)",
      "Bash(go version:*)",
      "Bash(go env:*)",
      "Bash(make:*)",
      "Bash(ssh:*)",
      "Bash(scp:*)",
      "Bash(rsync:*)",
      "Bash(sftp:*)",
      "Bash(curl -I:*)",
      "Bash(curl --head:*)",
      "Bash(curl -o:*)",
      "Bash(curl -O:*)",
      "Bash(curl -s:*)",
      "Bash(curl -sS:*)",
      "Bash(curl -w:*)",
      "Bash(curl --write-out:*)",
      "Bash(curl -X GET:*)",
      "Bash(curl -X POST:*)",
      "Bash(curl -X PUT:*)",
      "Bash(curl -X DELETE:*)",
      "Bash(curl -X PATCH:*)",
      "Bash(curl --request:*)",
      "Bash(wget -O:*)",
      "Bash(wget --output-document:*)",
      "Bash(wget -q:*)",
      "Bash(wget --quiet:*)",
      "Bash(brew list:*)",
      "Bash(brew info:*)",
      "Bash(brew search:*)",
      "Bash(brew deps:*)",
      "Bash(brew uses:*)",
      "Bash(brew outdated:*)",
      "Bash(brew doctor:*)",
      "Bash(brew config:*)",
      "Bash(brew --version:*)",
      "Edit",
      "Write",
      "Read",
      "Glob",
      "Grep",
      "LS",
      "Read(//Users/sethkravitz/.ssh/**)",
      "Bash(gh repo list:*)",
      "Read(//private/tmp/**)",
      "WebFetch",
      "WebSearch",
      "mcp__plugin_claude-mem_mcp-search__search",
      "mcp__plugin_claude-mem_mcp-search__get_observations",
      "mcp__plugin_context7_context7__resolve-library-id",
      "Read(//Users/sethkravitz/Code/**)",
      "Read(//Users/sethkravitz/.config/**)",
      "Read(//Users/sethkravitz/Code Projects/.claude/**)",
      "Read(//Users/sethkravitz/Code Projects/MyBrain/.claude/**)"
    ],
    "defaultMode": "default",
    "additionalDirectories": [
      "/Users/sethkravitz/Code/prompt-studio/src/app/api/uploads",
      "/Users/sethkravitz/.claude"
    ]
  },
  "enabledPlugins": {
    "context7@claude-plugins-official": true,
    "frontend-design@claude-plugins-official": true,
    "agent-sdk-dev@claude-plugins-official": true,
    "github@claude-plugins-official": true,
    "feature-dev@claude-plugins-official": true,
    "code-review@claude-plugins-official": true,
    "commit-commands@claude-plugins-official": true,
    "claude-mem@thedotmack": true,
    "ralph-wiggum@local-plugins": true,
    "ralph-loop@claude-plugins-official": true
  },
  "extraKnownMarketplaces": {
    "local-plugins": {
      "source": {
        "source": "directory",
        "path": "/Users/sethkravitz/.claude/plugins"
      }
    }
  },
  "alwaysThinkingEnabled": true
}
